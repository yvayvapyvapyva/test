<!DOCTYPE html>
<html>
<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU"></script>
<body style="margin:0;height:100vh">
<div id="map" style="width:100%;height:100%"></div>
<script>
ymaps.ready(() => {
    // Парсим точки из параметра URL
    const urlParams = new URLSearchParams(window.location.search);
    const pointsParam = urlParams.get('points');
    
    // Формат: points=lat1,lng1;lat2,lng2;lat3,lng3
    let points = [];
    
    if (pointsParam) {
        points = pointsParam.split(';').map(pair => {
            const [lat, lng] = pair.split(',').map(Number);
            return [lat, lng];
        }).filter(p => !isNaN(p[0]) && !isNaN(p[1]));
    } else {
        // Точки по умолчанию, если нет параметра
        points = [[55.75,37.62],[59.93,30.34],[55.80,49.11]];
    }
    
    // Создаем карту
    const map = new ymaps.Map('map', {
        center: points[0] || [55.75,37.62],
        zoom: points.length > 1 ? 4 : 10
    });
    
    // Добавляем точки
    points.forEach((c,i) => {
        map.geoObjects.add(new ymaps.Placemark(c, {
            hintContent: `Точка ${i+1}`,
            balloonContent: `${c[0]}, ${c[1]}`
        }, {
            preset: 'islands#redStretchyIcon',
            iconCaption: `${i+1}`
        }));
    });
    
    // Автомасштабирование если точек несколько
    if (points.length > 1) {
        map.setBounds(map.geoObjects.getBounds());
    }
});
</script>
</body>
</html>
